{"ast":null,"code":"\"use strict\";\n\n/**\n  * @reach/descendants v0.18.0\n  *\n  * Copyright (c) 2018-2022, React Training LLC\n  *\n  * This source code is licensed under the MIT license found in the\n  * LICENSE.md file in the root directory of this source tree.\n  *\n  * @license MIT\n  */\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {\n  enumerable: true,\n  configurable: true,\n  writable: true,\n  value\n}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {})) if (__hasOwnProp.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols) for (var prop of __getOwnPropSymbols(b)) {\n    if (__propIsEnum.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source) if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0) target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols) for (var prop of __getOwnPropSymbols(source)) {\n    if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop)) target[prop] = source[prop];\n  }\n  return target;\n};\nvar __export = (target, all) => {\n  for (var name in all) __defProp(target, name, {\n    get: all[name],\n    enumerable: true\n  });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from)) if (!__hasOwnProp.call(to, key) && key !== except) __defProp(to, key, {\n      get: () => from[key],\n      enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable\n    });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", {\n  value: mod,\n  enumerable: true\n}) : target, mod));\nvar __toCommonJS = mod => __copyProps(__defProp({}, \"__esModule\", {\n  value: true\n}), mod);\n\n// src/reach-descendants.tsx\nvar reach_descendants_exports = {};\n__export(reach_descendants_exports, {\n  DescendantProvider: () => DescendantProvider,\n  createDescendantContext: () => createDescendantContext,\n  useDescendant: () => useDescendant,\n  useDescendantKeyDown: () => useDescendantKeyDown,\n  useDescendants: () => useDescendants,\n  useDescendantsInit: () => useDescendantsInit\n});\nmodule.exports = __toCommonJS(reach_descendants_exports);\nvar React = __toESM(require(\"react\"));\nvar import_utils = require(\"@reach/utils\");\nfunction createDescendantContext(name, initialValue = {}) {\n  const descendants = [];\n  let ctx = React.createContext(__spreadValues({\n    descendants,\n    registerDescendant: () => import_utils.noop\n  }, initialValue));\n  ctx.displayName = name;\n  return ctx;\n}\nfunction useDescendant(descendant, context, indexProp) {\n  let forceUpdate = (0, import_utils.useForceUpdate)();\n  let {\n    registerDescendant,\n    descendants\n  } = React.useContext(context);\n  let index = indexProp != null ? indexProp : descendants.findIndex(item => item.element === descendant.element);\n  (0, import_utils.useIsomorphicLayoutEffect)(() => {\n    if (!descendant.element) forceUpdate();\n    return registerDescendant(__spreadProps(__spreadValues({}, descendant), {\n      index\n    }));\n  }, [descendant, forceUpdate, index, registerDescendant, ...Object.values(descendant)]);\n  return index;\n}\nfunction useDescendantsInit() {\n  return React.useState([]);\n}\nfunction useDescendants(ctx) {\n  return React.useContext(ctx).descendants;\n}\nfunction DescendantProvider({\n  context: Ctx,\n  children,\n  items,\n  set\n}) {\n  let registerDescendant = React.useCallback(_a => {\n    var _b = _a,\n      {\n        element,\n        index: explicitIndex\n      } = _b,\n      rest = __objRest(_b, [\"element\", \"index\"]);\n    if (!element) return import_utils.noop;\n    set(items2 => {\n      if (explicitIndex != null && explicitIndex !== -1) {\n        return insertAt(items2, __spreadValues({\n          element,\n          index: explicitIndex\n        }, rest), explicitIndex);\n      }\n      if (items2.length === 0) {\n        return [__spreadProps(__spreadValues({}, rest), {\n          element,\n          index: 0\n        })];\n      }\n      if (true) {\n        if (items2.find(item => item.element === element)) {\n          console.warn(\"[reach-ui]: `useDescendant` was called with an element that was already registered.\\n\\nIf you are using the `@reach/descendants` package directly, make sure to only register descendants once. Registering a descendant more than once will lead to bugs in your app.\\n\\nIf you are using another `reach-ui` package, this is probably our bug!\\n\\nTo report a bug, open a new issue:\\n\\n  https://github.com/reach/reach-ui/issues/new?assignees=&labels=&template=Bug_report.md\\n\\nIMPORTANT: this check will only run in the development build, so if you see this warning please be aware that your app may crash when deployed.\");\n          return updateIndices(items2);\n        }\n      }\n      let index = findDOMIndex(items2, element);\n      let newItems;\n      if (index === -1) {\n        newItems = [...items2, __spreadProps(__spreadValues({}, rest), {\n          element,\n          index: items2.length\n        })];\n      } else {\n        newItems = insertAt(items2, __spreadProps(__spreadValues({}, rest), {\n          element,\n          index\n        }), index);\n      }\n      return newItems;\n    });\n    return () => {\n      if (!element) return;\n      set(items2 => items2.filter(item => element !== item.element));\n    };\n  }, []);\n  return /* @__PURE__ */React.createElement(Ctx.Provider, {\n    value: React.useMemo(() => {\n      return {\n        descendants: items,\n        registerDescendant\n      };\n    }, [items, registerDescendant])\n  }, children);\n}\nfunction useDescendantKeyDown(context, options) {\n  let {\n    descendants\n  } = React.useContext(context);\n  let {\n    callback,\n    currentIndex,\n    filter,\n    key = \"index\",\n    orientation = \"vertical\",\n    rotate = true,\n    rtl = false\n  } = options;\n  return function handleKeyDown(event) {\n    if (![\"ArrowDown\", \"ArrowUp\", \"ArrowLeft\", \"ArrowRight\", \"PageUp\", \"PageDown\", \"Home\", \"End\"].includes(event.key)) {\n      return;\n    }\n    let index = currentIndex != null ? currentIndex : -1;\n    let selectableDescendants = filter ? descendants.filter(filter) : descendants;\n    if (!selectableDescendants.length) {\n      return;\n    }\n    let selectableIndex = selectableDescendants.findIndex(descendant => descendant.index === currentIndex);\n    function getNextOption() {\n      let atBottom = index === getLastOption().index;\n      return atBottom ? rotate ? getFirstOption() : selectableDescendants[selectableIndex] : selectableDescendants[(selectableIndex + 1) % selectableDescendants.length];\n    }\n    function getPreviousOption() {\n      let atTop = index === getFirstOption().index;\n      return atTop ? rotate ? getLastOption() : selectableDescendants[selectableIndex] : selectableDescendants[(selectableIndex - 1 + selectableDescendants.length) % selectableDescendants.length];\n    }\n    function getFirstOption() {\n      return selectableDescendants[0];\n    }\n    function getLastOption() {\n      return selectableDescendants[selectableDescendants.length - 1];\n    }\n    switch (event.key) {\n      case \"ArrowDown\":\n        if (orientation === \"vertical\" || orientation === \"both\") {\n          event.preventDefault();\n          let next = getNextOption();\n          callback(key === \"option\" ? next : next[key]);\n        }\n        break;\n      case \"ArrowUp\":\n        if (orientation === \"vertical\" || orientation === \"both\") {\n          event.preventDefault();\n          let prev = getPreviousOption();\n          callback(key === \"option\" ? prev : prev[key]);\n        }\n        break;\n      case \"ArrowLeft\":\n        if (orientation === \"horizontal\" || orientation === \"both\") {\n          event.preventDefault();\n          let nextOrPrev = (rtl ? getNextOption : getPreviousOption)();\n          callback(key === \"option\" ? nextOrPrev : nextOrPrev[key]);\n        }\n        break;\n      case \"ArrowRight\":\n        if (orientation === \"horizontal\" || orientation === \"both\") {\n          event.preventDefault();\n          let prevOrNext = (rtl ? getPreviousOption : getNextOption)();\n          callback(key === \"option\" ? prevOrNext : prevOrNext[key]);\n        }\n        break;\n      case \"PageUp\":\n        event.preventDefault();\n        let prevOrFirst = (event.ctrlKey ? getPreviousOption : getFirstOption)();\n        callback(key === \"option\" ? prevOrFirst : prevOrFirst[key]);\n        break;\n      case \"Home\":\n        event.preventDefault();\n        let first = getFirstOption();\n        callback(key === \"option\" ? first : first[key]);\n        break;\n      case \"PageDown\":\n        event.preventDefault();\n        let nextOrLast = (event.ctrlKey ? getNextOption : getLastOption)();\n        callback(key === \"option\" ? nextOrLast : nextOrLast[key]);\n        break;\n      case \"End\":\n        event.preventDefault();\n        let last = getLastOption();\n        callback(key === \"option\" ? last : last[key]);\n        break;\n    }\n  };\n}\nfunction isElementPreceding(a, b) {\n  return Boolean(b.compareDocumentPosition(a) & Node.DOCUMENT_POSITION_PRECEDING);\n}\nfunction findDOMIndex(items, element) {\n  if (!element) return -1;\n  if (!items.length) return -1;\n  let length = items.length;\n  while (length--) {\n    let currentElement = items[length].element;\n    if (!currentElement) continue;\n    if (isElementPreceding(currentElement, element)) {\n      return length + 1;\n    }\n  }\n  return -1;\n}\nfunction insertAt(array, item, index) {\n  if (index == null || !(index in array)) {\n    return [...array, item];\n  }\n  return [...array.slice(0, index), item, ...array.slice(index)];\n}\nfunction updateIndices(items) {\n  return items.sort((a, b) => !a.element || !b.element ? 0 : isElementPreceding(a.element, b.element) ? -1 : 1).map((item, index) => __spreadProps(__spreadValues({}, item), {\n    index\n  }));\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (module.exports = {\n  DescendantProvider,\n  createDescendantContext,\n  useDescendant,\n  useDescendantKeyDown,\n  useDescendants,\n  useDescendantsInit\n});","map":{"version":3,"names":["reach_descendants_exports","__export","DescendantProvider","createDescendantContext","useDescendant","useDescendantKeyDown","useDescendants","useDescendantsInit","module","exports","__toCommonJS","React","__toESM","require","import_utils","name","initialValue","descendants","ctx","createContext","__spreadValues","registerDescendant","noop","displayName","descendant","context","indexProp","forceUpdate","useForceUpdate","useContext","index","findIndex","item","element","useIsomorphicLayoutEffect","__spreadProps","Object","values","useState","Ctx","children","items","set","useCallback","_a","_b","explicitIndex","rest","__objRest","items2","insertAt","length","find","console","warn","updateIndices","findDOMIndex","newItems","filter","createElement","Provider","value","useMemo","options","callback","currentIndex","key","orientation","rotate","rtl","handleKeyDown","event","includes","selectableDescendants","selectableIndex","getNextOption","atBottom","getLastOption","getFirstOption","getPreviousOption","atTop","preventDefault","next","prev","nextOrPrev","prevOrNext","prevOrFirst","ctrlKey","first","nextOrLast","last","isElementPreceding","a","b","Boolean","compareDocumentPosition","Node","DOCUMENT_POSITION_PRECEDING","currentElement","array","slice","sort","map"],"sources":["C:\\Users\\komar\\OneDrive\\Pulpit\\PlacePalApp\\client\\node_modules\\@reach\\combobox\\node_modules\\@reach\\descendants\\src\\reach-descendants.tsx"],"sourcesContent":["import * as React from \"react\";\nimport {\n\tuseForceUpdate,\n\tuseIsomorphicLayoutEffect as useLayoutEffect,\n\tnoop,\n} from \"@reach/utils\";\n\ndeclare const __DEV__: boolean;\n\nfunction createDescendantContext<DescendantType extends Descendant>(\n\tname: string,\n\tinitialValue = {}\n) {\n\ttype T = DescendantContextValue<DescendantType>;\n\tconst descendants: DescendantType[] = [];\n\tlet ctx = React.createContext<T>({\n\t\tdescendants,\n\t\tregisterDescendant: () => noop,\n\t\t...initialValue,\n\t});\n\tctx.displayName = name;\n\treturn ctx;\n}\n\n/**\n * This hook registers our descendant by passing it into an array. We can then\n * search that array by to find its index when registering it in the component.\n * We use this for focus management, keyboard navigation, and typeahead\n * functionality for some components.\n *\n * The hook accepts the element node and (optionally) a key. The key is useful\n * if multiple descendants have identical text values and we need to\n * differentiate siblings for some reason.\n *\n * Our main goals with this are:\n *   1) maximum composability,\n *   2) minimal API friction\n *   3) SSR compatibility*\n *   4) concurrent safe\n *   5) index always up-to-date with the tree despite changes\n *   6) works with memoization of any component in the tree (hopefully)\n *\n * As for SSR, the good news is that we don't actually need the index on the\n * server for most use-cases, as we are only using it to determine the order of\n * composed descendants for keyboard navigation. However, in the few cases where\n * this is not the case, we can require an explicit index from the app.\n */\nfunction useDescendant<DescendantType extends Descendant>(\n\tdescendant: Omit<DescendantType, \"index\">,\n\tcontext: React.Context<DescendantContextValue<DescendantType>>,\n\tindexProp?: number\n) {\n\tlet forceUpdate = useForceUpdate();\n\tlet { registerDescendant, descendants } = React.useContext(context);\n\n\t// This will initially return -1 because we haven't registered the descendant\n\t// on the first render. After we register, this will then return the correct\n\t// index on the following render and we will re-register descendants so that\n\t// everything is up-to-date before the user interacts with a collection.\n\tlet index =\n\t\tindexProp ??\n\t\tdescendants.findIndex((item) => item.element === descendant.element);\n\n\t// Prevent any flashing\n\tuseLayoutEffect(() => {\n\t\tif (!descendant.element) forceUpdate();\n\t\treturn registerDescendant({ ...descendant, index } as DescendantType);\n\t}, [\n\t\tdescendant,\n\t\tforceUpdate,\n\t\tindex,\n\t\tregisterDescendant,\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t...Object.values(descendant),\n\t]);\n\n\treturn index;\n}\n\nfunction useDescendantsInit<DescendantType extends Descendant>() {\n\treturn React.useState<DescendantType[]>([]);\n}\n\nfunction useDescendants<DescendantType extends Descendant>(\n\tctx: React.Context<DescendantContextValue<DescendantType>>\n) {\n\treturn React.useContext(ctx).descendants;\n}\n\nfunction DescendantProvider<DescendantType extends Descendant>({\n\tcontext: Ctx,\n\tchildren,\n\titems,\n\tset,\n}: {\n\tcontext: React.Context<DescendantContextValue<DescendantType>>;\n\tchildren: React.ReactNode;\n\titems: DescendantType[];\n\tset: React.Dispatch<React.SetStateAction<DescendantType[]>>;\n}) {\n\tlet registerDescendant = React.useCallback(\n\t\t({\n\t\t\telement,\n\t\t\tindex: explicitIndex,\n\t\t\t...rest\n\t\t}: Omit<DescendantType, \"index\"> & { index?: number | undefined }) => {\n\t\t\tif (!element) return noop;\n\n\t\t\tset((items) => {\n\t\t\t\tif (explicitIndex != null && explicitIndex !== -1) {\n\t\t\t\t\treturn insertAt(\n\t\t\t\t\t\titems,\n\t\t\t\t\t\t{ element, index: explicitIndex, ...rest } as DescendantType,\n\t\t\t\t\t\texplicitIndex\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif (items.length === 0) {\n\t\t\t\t\t// If there are no items, register at index 0 and bail.\n\t\t\t\t\treturn [{ ...rest, element, index: 0 } as DescendantType];\n\t\t\t\t}\n\n\t\t\t\tif (__DEV__) {\n\t\t\t\t\tif (items.find((item) => item.element === element)) {\n\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\"[reach-ui]: `useDescendant` was called with an element that was \" +\n\t\t\t\t\t\t\t\t\"already registered.\\n\\n\" +\n\t\t\t\t\t\t\t\t\"If you are using the `@reach/descendants` package directly, \" +\n\t\t\t\t\t\t\t\t\"make sure to only register descendants once. Registering a descendant \" +\n\t\t\t\t\t\t\t\t\"more than once will lead to bugs in your app.\\n\\n\" +\n\t\t\t\t\t\t\t\t\"If you are using another `reach-ui` package, this is probably our bug!\\n\\n\" +\n\t\t\t\t\t\t\t\t\"To report a bug, open a new issue:\\n\\n\" +\n\t\t\t\t\t\t\t\t\"  https://github.com/reach/reach-ui/issues/new?assignees=&labels=&template=Bug_report.md\\n\\n\" +\n\t\t\t\t\t\t\t\t\"IMPORTANT: this check will only run in the development build, so if you \" +\n\t\t\t\t\t\t\t\t\"see this warning please be aware that your app may crash when deployed.\"\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn updateIndices(items);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet index = findDOMIndex(items, element);\n\t\t\t\tlet newItems: DescendantType[];\n\t\t\t\tif (index === -1) {\n\t\t\t\t\tnewItems = [\n\t\t\t\t\t\t...items,\n\t\t\t\t\t\t{ ...rest, element, index: items.length } as DescendantType,\n\t\t\t\t\t];\n\t\t\t\t} else {\n\t\t\t\t\tnewItems = insertAt(\n\t\t\t\t\t\titems,\n\t\t\t\t\t\t{ ...rest, element, index } as DescendantType,\n\t\t\t\t\t\tindex\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn newItems;\n\t\t\t});\n\n\t\t\treturn () => {\n\t\t\t\tif (!element) return;\n\t\t\t\tset((items) => items.filter((item) => element !== item.element));\n\t\t\t};\n\t\t},\n\t\t// set is a state setter initialized by the useDescendantsInit hook.\n\t\t// We can safely ignore the lint warning here because it will not change\n\t\t// between renders.\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t[]\n\t);\n\n\treturn (\n\t\t<Ctx.Provider\n\t\t\tvalue={React.useMemo(() => {\n\t\t\t\treturn {\n\t\t\t\t\tdescendants: items,\n\t\t\t\t\tregisterDescendant,\n\t\t\t\t};\n\t\t\t}, [items, registerDescendant])}\n\t\t>\n\t\t\t{children}\n\t\t</Ctx.Provider>\n\t);\n}\n\n/**\n * Testing this as an abstraction for compound components that use keyboard\n * navigation. Hoping this will help us prevent bugs and mismatched behavior\n * across various components, but it may also prove to be too messy of an\n * abstraction in the end.\n *\n * Currently used in:\n *   - Tabs\n *   - Accordion\n *\n * @param context\n * @param options\n */\nfunction useDescendantKeyDown<\n\tDescendantType extends Descendant,\n\tK extends keyof DescendantType = keyof DescendantType\n>(\n\tcontext: React.Context<DescendantContextValue<DescendantType>>,\n\toptions: {\n\t\tcurrentIndex: number | null | undefined;\n\t\tkey?: K | \"option\";\n\t\tfilter?: (descendant: DescendantType) => boolean;\n\t\torientation?: \"vertical\" | \"horizontal\" | \"both\";\n\t\trotate?: boolean;\n\t\trtl?: boolean;\n\t\tcallback(nextOption: DescendantType | DescendantType[K]): void;\n\t}\n) {\n\tlet { descendants } = React.useContext(context);\n\tlet {\n\t\tcallback,\n\t\tcurrentIndex,\n\t\tfilter,\n\t\tkey = \"index\" as K,\n\t\torientation = \"vertical\",\n\t\trotate = true,\n\t\trtl = false,\n\t} = options;\n\n\treturn function handleKeyDown(event: React.KeyboardEvent) {\n\t\tif (\n\t\t\t![\n\t\t\t\t\"ArrowDown\",\n\t\t\t\t\"ArrowUp\",\n\t\t\t\t\"ArrowLeft\",\n\t\t\t\t\"ArrowRight\",\n\t\t\t\t\"PageUp\",\n\t\t\t\t\"PageDown\",\n\t\t\t\t\"Home\",\n\t\t\t\t\"End\",\n\t\t\t].includes(event.key)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet index = currentIndex ?? -1;\n\n\t\t// If we use a filter function, we need to re-index our descendants array\n\t\t// so that filtered descendent elements aren't selected.\n\t\tlet selectableDescendants = filter\n\t\t\t? descendants.filter(filter)\n\t\t\t: descendants;\n\n\t\t// We need some options for any of this to work!\n\t\tif (!selectableDescendants.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet selectableIndex = selectableDescendants.findIndex(\n\t\t\t(descendant) => descendant.index === currentIndex\n\t\t);\n\n\t\tfunction getNextOption() {\n\t\t\tlet atBottom = index === getLastOption().index;\n\t\t\treturn atBottom\n\t\t\t\t? rotate\n\t\t\t\t\t? getFirstOption()\n\t\t\t\t\t: selectableDescendants[selectableIndex]\n\t\t\t\t: selectableDescendants[\n\t\t\t\t\t\t(selectableIndex + 1) % selectableDescendants.length\n\t\t\t\t  ];\n\t\t}\n\n\t\tfunction getPreviousOption() {\n\t\t\tlet atTop = index === getFirstOption().index;\n\t\t\treturn atTop\n\t\t\t\t? rotate\n\t\t\t\t\t? getLastOption()\n\t\t\t\t\t: selectableDescendants[selectableIndex]\n\t\t\t\t: selectableDescendants[\n\t\t\t\t\t\t(selectableIndex - 1 + selectableDescendants.length) %\n\t\t\t\t\t\t\tselectableDescendants.length\n\t\t\t\t  ];\n\t\t}\n\n\t\tfunction getFirstOption() {\n\t\t\treturn selectableDescendants[0];\n\t\t}\n\n\t\tfunction getLastOption() {\n\t\t\treturn selectableDescendants[selectableDescendants.length - 1];\n\t\t}\n\n\t\tswitch (event.key) {\n\t\t\tcase \"ArrowDown\":\n\t\t\t\tif (orientation === \"vertical\" || orientation === \"both\") {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tlet next = getNextOption();\n\t\t\t\t\tcallback(key === \"option\" ? next : next[key]);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"ArrowUp\":\n\t\t\t\tif (orientation === \"vertical\" || orientation === \"both\") {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tlet prev = getPreviousOption();\n\t\t\t\t\tcallback(key === \"option\" ? prev : prev[key]);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"ArrowLeft\":\n\t\t\t\tif (orientation === \"horizontal\" || orientation === \"both\") {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tlet nextOrPrev = (rtl ? getNextOption : getPreviousOption)();\n\t\t\t\t\tcallback(key === \"option\" ? nextOrPrev : nextOrPrev[key]);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"ArrowRight\":\n\t\t\t\tif (orientation === \"horizontal\" || orientation === \"both\") {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tlet prevOrNext = (rtl ? getPreviousOption : getNextOption)();\n\t\t\t\t\tcallback(key === \"option\" ? prevOrNext : prevOrNext[key]);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"PageUp\":\n\t\t\t\tevent.preventDefault();\n\t\t\t\tlet prevOrFirst = (\n\t\t\t\t\tevent.ctrlKey ? getPreviousOption : getFirstOption\n\t\t\t\t)();\n\t\t\t\tcallback(key === \"option\" ? prevOrFirst : prevOrFirst[key]);\n\t\t\t\tbreak;\n\t\t\tcase \"Home\":\n\t\t\t\tevent.preventDefault();\n\t\t\t\tlet first = getFirstOption();\n\t\t\t\tcallback(key === \"option\" ? first : first[key]);\n\t\t\t\tbreak;\n\t\t\tcase \"PageDown\":\n\t\t\t\tevent.preventDefault();\n\t\t\t\tlet nextOrLast = (event.ctrlKey ? getNextOption : getLastOption)();\n\t\t\t\tcallback(key === \"option\" ? nextOrLast : nextOrLast[key]);\n\t\t\t\tbreak;\n\t\t\tcase \"End\":\n\t\t\t\tevent.preventDefault();\n\t\t\t\tlet last = getLastOption();\n\t\t\t\tcallback(key === \"option\" ? last : last[key]);\n\t\t\t\tbreak;\n\t\t}\n\t};\n}\n\nfunction isElementPreceding(a: Element, b: Element) {\n\treturn Boolean(\n\t\tb.compareDocumentPosition(a) & Node.DOCUMENT_POSITION_PRECEDING\n\t);\n}\n\nfunction findDOMIndex<DescendantType extends Descendant>(\n\titems: DescendantType[],\n\telement: Element\n) {\n\tif (!element) return -1;\n\tif (!items.length) return -1;\n\n\tlet length = items.length;\n\t// Most of the times, the new item will be added at the end of the list, so we\n\t// do a findeIndex in reverse order, instead of wasting time searching the\n\t// index from the beginning.\n\twhile (length--) {\n\t\tlet currentElement = items[length].element;\n\t\tif (!currentElement) continue;\n\t\tif (isElementPreceding(currentElement, element)) {\n\t\t\treturn length + 1;\n\t\t}\n\t}\n\treturn -1;\n}\n\n/**\n * Copy an array of items with a new item added at a specific index.\n * @param array The source array\n * @param item The item to insert into the array\n * @param index The index to insert the item at\n * @returns A copy of the array with the item inserted at the specified index\n */\nfunction insertAt<T extends any[]>(\n\tarray: T,\n\titem: T[number],\n\tindex?: number\n): T {\n\tif (index == null || !(index in array)) {\n\t\treturn [...array, item] as T;\n\t}\n\treturn [...array.slice(0, index), item, ...array.slice(index)] as T;\n}\n\nfunction updateIndices<DescendantType extends Descendant>(\n\titems: DescendantType[]\n): DescendantType[] {\n\treturn items\n\t\t.sort((a, b) =>\n\t\t\t!a.element || !b.element\n\t\t\t\t? 0\n\t\t\t\t: isElementPreceding(a.element, b.element)\n\t\t\t\t? -1\n\t\t\t\t: 1\n\t\t)\n\t\t.map((item, index) => ({ ...item, index }));\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// Types\n\ntype SomeElement<T> = T extends Element ? T : HTMLElement;\n\ntype Descendant<ElementType = HTMLElement> = {\n\telement: SomeElement<ElementType> | null;\n\tindex: number;\n};\n\ninterface DescendantContextValue<DescendantType extends Descendant> {\n\tdescendants: DescendantType[];\n\tregisterDescendant(descendant: DescendantType): () => void;\n}\n\n////////////////////////////////////////////////////////////////////////////////\n// Exports\n\nexport type { Descendant, DescendantContextValue };\nexport {\n\tcreateDescendantContext,\n\tDescendantProvider,\n\tuseDescendant,\n\tuseDescendantKeyDown,\n\tuseDescendants,\n\tuseDescendantsInit,\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}